---
- hosts: localhost
  connection: local
  become: yes

  vars_files:
    - config/beetbox.config.yml
    - config/project.config.yml
    - config/vagrant.config.yml
    - config/local.config.yml

  tasks:

    - name: Install Galaxy roles
      command: >
        ansible-galaxy install {{ item.name }} -p {{ beet_role_dir }}
        creates={{ beet_role_dir }}/{{ item.name }}
      with_items: galaxy_roles

    - name: Update Galaxy roles
      command: >
        ansible-galaxy install {{ item.name }} -p {{ beet_role_dir }} --force --ignore-errors
      when: item.force_update is defined
      with_items: galaxy_roles
